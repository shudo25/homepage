# ささらさん指示画面 仕様書

## 概要
Zoom会議AIアシスタント「ささらさん」への指示・モニタリング用Web UIの画面仕様。
本仕様はCopilotと開発者間の情報共有を目的とする。


## デバッグ用音声入力欄（追加仕様案）

### 目的
- 実際の音声入力では同じ内容を再現するのが難しいため、テキストで直接入力できると検証やデバッグが容易になる。
- 物理マイク以外からの入力（コピペや手入力）を「マイク入力」としてシステムに流し込みたい場面がある（認識精度テスト、異常系テスト、運用時の緊急対応など）。

### 仕様案
- Web UI上部または適切な位置に「デバッグ用音声入力欄（テキストボックス＋送信ボタン）」を追加する。
- 入力されたテキストは、マイクからの音声認識結果と同じ扱い（input_queueにsrc="audio"でput）で処理される。
- 送信時、音声認識結果欄や聞き取り内容欄にも即時反映される。
- 通常運用時は非表示または折りたたみ可能とし、デバッグ時のみ利用できる設計も検討する。


1. **音声認識結果（編集・送信可）**
    - 最新の音声認識テキストが表示される。
    - テキストエリアで編集可能。
    - 「編集内容をささらに送信」ボタンで編集内容を送信できる。
    - 音声認識の途中経過も即時反映される（WebSocket対応）。

2. **指示ボタン**
    - 「ささらさん発言」
    - 「ささらさん終了」
    - 「参加終了（退出）」
    - 各ボタン押下で即座に指示が送信される。

3. **指示ログ**
    - 直近の指示履歴を時系列で表示。
    - 編集送信やボタン指示も記録される。

4. **直近の聞き取り内容**
    - 音声認識で取得した直近の発話内容（複数件）をリスト表示。

5. **直近の応答内容**
    - ささらさんが返答した内容（複数件）をリスト表示。

6. **ささらさんの状態**
    - 現在の状態（listening=会議を聞いている/speaking=応答中）を色付きで表示。

## 補足
- 音声認識結果はリアルタイムで反映され、編集中は自動上書きされない。
- 画面の自動リロードは行わず、WebSocketで即時反映。
- 重要な指示（参加終了など）はPOST/Redirect/GETで二重送信を防止。
- 画面構成や要素の順序は「情報の流れ」を意識して設計。


## 協力・整合性維持の主旨

この仕様書と実際のコード・画面が常に整合するよう、Copilot（AI）と開発者（人間）が協力して開発・保守を行うことを推奨します。

- Copilotは、仕様とコードの差異や不整合を積極的に検出・指摘し、必要な修正案や改善案を提案します。
- 開発者も、運用や要件変更時にCopilotへ明確な意図や仕様変更を伝え、協力して仕様・実装の同期を図ります。
- 可能な限りCopilotが自動化・補助を行い、開発者の負担を軽減することを目指します。

この協力体制により、仕様と実装のズレを最小化し、ユーザーにとって分かりやすく保守性の高いシステムを維持します。

---

（最終更新: 2025-10-29）
